{"version":3,"file":"autoResize-73247714.js","sources":["../src/use/autoResize.js"],"sourcesContent":["import { useState, useCallback, useEffect, useRef, useImperativeHandle } from 'react'\nimport { debounce, observerDomResize } from '../util/index'\n\nexport default function useAutoResize(ref) {\n  const [state, setState] = useState({ width: 0, height: 0 })\n\n  const domRef = useRef(null)\n\n  const setWH = useCallback(() => {\n    const { clientWidth, clientHeight } = domRef.current || { clientWidth: 0, clientHeight: 0 }\n\n    setState({ width: clientWidth, height: clientHeight })\n\n    if (!domRef.current) {\n      console.warn('DataV: Failed to get dom node, component rendering may be abnormal!')\n    } else if (!clientWidth || !clientHeight) {\n      console.warn('DataV: Component width or height is 0px, rendering abnormality may occur!')\n    }\n  }, [])\n\n  useImperativeHandle(ref, () => ({ setWH }), [])\n\n  useEffect(() => {\n    const debounceSetWHFun = debounce(setWH, 100)\n\n    debounceSetWHFun()\n\n    const domObserver = observerDomResize(domRef.current, debounceSetWHFun)\n\n    window.addEventListener('resize', debounceSetWHFun)\n\n    return () => {\n      window.removeEventListener('resize', debounceSetWHFun)\n\n      if (!domObserver) {\n        return\n      }\n\n      domObserver.disconnect()\n      domObserver.takeRecords()\n    }\n  }, [])\n\n  return { ...state, domRef, setWH }\n}\n"],"names":["useAutoResize","ref","useState","width","height","state","setState","domRef","useRef","setWH","useCallback","current","clientWidth","clientHeight","console","warn","useImperativeHandle","useEffect","debounceSetWHFun","debounce","domObserver","observerDomResize","window","addEventListener","removeEventListener","disconnect","takeRecords"],"mappings":";;;;;;;;;AAGe,SAASA,aAAT,CAAuBC,GAAvB,EAA4B;AAAA,kBACfC,eAAS,EAAEC,OAAO,CAAT,EAAYC,QAAQ,CAApB,EAAT,CADe;AAAA;AAAA,MAClCC,KADkC;AAAA,MAC3BC,QAD2B;;AAGzC,MAAMC,SAASC,aAAO,IAAP,CAAf;;AAEA,MAAMC,QAAQC,kBAAY,YAAM;AAAA,eACQH,OAAOI,OAAP,IAAkB,EAAEC,aAAa,CAAf,EAAkBC,cAAc,CAAhC,EAD1B;AAAA,QACtBD,WADsB,QACtBA,WADsB;AAAA,QACTC,YADS,QACTA,YADS;;AAG9BP,aAAS,EAAEH,OAAOS,WAAT,EAAsBR,QAAQS,YAA9B,EAAT;;AAEA,QAAI,CAACN,OAAOI,OAAZ,EAAqB;AACnBG,cAAQC,IAAR,CAAa,qEAAb;AACD,KAFD,MAEO,IAAI,CAACH,WAAD,IAAgB,CAACC,YAArB,EAAmC;AACxCC,cAAQC,IAAR,CAAa,2EAAb;AACD;AACF,GAVa,EAUX,EAVW,CAAd;;AAYAC,4BAAoBf,GAApB,EAAyB;AAAA,WAAO,EAAEQ,YAAF,EAAP;AAAA,GAAzB,EAA4C,EAA5C;;AAEAQ,kBAAU,YAAM;AACd,QAAMC,mBAAmBC,eAASV,KAAT,EAAgB,GAAhB,CAAzB;;AAEAS;;AAEA,QAAME,cAAcC,wBAAkBd,OAAOI,OAAzB,EAAkCO,gBAAlC,CAApB;;AAEAI,WAAOC,gBAAP,CAAwB,QAAxB,EAAkCL,gBAAlC;;AAEA,WAAO,YAAM;AACXI,aAAOE,mBAAP,CAA2B,QAA3B,EAAqCN,gBAArC;;AAEA,UAAI,CAACE,WAAL,EAAkB;AAChB;AACD;;AAEDA,kBAAYK,UAAZ;AACAL,kBAAYM,WAAZ;AACD,KATD;AAUD,GAnBD,EAmBG,EAnBH;;AAqBA,oCAAYrB,KAAZ,IAAmBE,cAAnB,EAA2BE,YAA3B;AACD;;;;"}