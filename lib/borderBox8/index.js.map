{"version":3,"file":"index.js","sources":["../../src/components/borderBox8/index.js"],"sourcesContent":["import React, { useState, useMemo, forwardRef } from 'react'\n\nimport PropTypes from 'prop-types'\n\nimport classnames from 'classnames'\n\nimport { deepMerge } from '@jiaminghi/charts/lib/util/index'\nimport { deepClone } from '@jiaminghi/c-render/lib/plugin/util'\n\nimport useAutoResize from '../../use/autoResize'\n\nimport { uuid } from '../../util'\n\nimport './style.less'\n\nconst defaultColor = ['#235fa7', '#4fd2dd']\n\nconst BorderBox = forwardRef((\n  {\n    children,\n    className,\n    style,\n    color = [],\n    dur = 3,\n    backgroundColor = 'transparent',\n    reverse = false\n  },\n  ref\n) => {\n  const { width, height, domRef } = useAutoResize(ref)\n\n  const [{ path, gradient, mask }] = useState(() => {\n    const id = uuid()\n\n    return {\n      path: `border-box-8-path-${id}`,\n      gradient: `border-box-8-gradient-${id}`,\n      mask: `border-box-8-mask-${id}`\n    }\n  })\n\n  const pathD = useMemo(() =>\n    reverse\n      ? `M 2.5, 2.5 L 2.5, ${height - 2.5} L ${width - 2.5}, ${height - 2.5} L ${width - 2.5}, 2.5 L 2.5, 2.5`\n      : `M2.5, 2.5 L${width - 2.5}, 2.5 L${width - 2.5}, ${height - 2.5} L2.5, ${height - 2.5} L2.5, 2.5`\n  , [width, height, reverse])\n\n  const mergedColor = useMemo(() => deepMerge(deepClone(defaultColor, true), color || []), [color])\n\n  const length = useMemo(() => (width + height - 5) * 2, [width, height])\n\n  const classNames = useMemo(() => classnames('dv-border-box-8', className), [\n    className\n  ])\n\n  return (\n    <div className={classNames} style={style} ref={domRef}>\n      <svg className='dv-border-svg-container' width={width} height={height}>\n        <defs>\n          <path id={path} d={pathD} fill='transparent' />\n          <radialGradient id={gradient} cx='50%' cy='50%' r='50%'>\n            <stop offset='0%' stopColor='#fff' stopOpacity='1' />\n            <stop offset='100%' stopColor='#fff' stopOpacity='0' />\n          </radialGradient>\n\n          <mask id={mask}>\n            <circle cx='0' cy='0' r='150' fill={`url(#${gradient})`}>\n              <animateMotion dur={`${dur}s`} path={pathD} rotate='auto' repeatCount='indefinite' />\n            </circle>\n          </mask>\n        </defs>\n\n        <polygon fill={backgroundColor} points={`5, 5 ${width - 5}, 5 ${width - 5} ${height - 5} 5, ${height - 5}`} />\n\n        <use stroke={mergedColor[0]} strokeWidth='1' href={`#${path}`} />\n\n        <use\n          stroke={mergedColor[1]}\n          strokeWidth='3'\n          href={`#${path}`}\n          mask={`url(#${mask})`}\n        >\n          <animate\n            attributeName='stroke-dasharray'\n            from={`0, ${length}`}\n            to={`${length}, 0`}\n            dur={`${dur}s`}\n            repeatCount='indefinite'\n          />\n        </use>\n      </svg>\n\n      <div className='border-box-content'>{children}</div>\n    </div>\n  )\n})\n\nBorderBox.propTypes = {\n  children: PropTypes.node,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  color: PropTypes.array,\n  dur: PropTypes.number,\n  backgroundColor: PropTypes.string,\n  reverse: PropTypes.bool\n}\n\nexport default BorderBox\n"],"names":["defaultColor","BorderBox","forwardRef","ref","children","className","style","color","dur","backgroundColor","reverse","useAutoResize","width","height","domRef","useState","id","uuid","path","gradient","mask","pathD","useMemo","mergedColor","deepMerge","deepClone","length","classNames","classnames","React","propTypes","PropTypes","node","string","object","array","number","bool"],"mappings":"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"}