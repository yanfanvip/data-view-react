{"version":3,"file":"index.js","sources":["../../src/components/decoration2/index.js"],"sourcesContent":["import React, { useMemo, forwardRef } from 'react'\n\nimport PropTypes from 'prop-types'\n\nimport classnames from 'classnames'\n\nimport { deepMerge } from '@jiaminghi/charts/lib/util/index'\nimport { deepClone } from '@jiaminghi/c-render/lib/plugin/util'\n\nimport useAutoResize from '../../use/autoResize'\n\nimport './style.less'\n\nconst defaultColor = ['#3faacb', '#fff']\n\nconst Decoration = forwardRef(({ reverse = false, dur = 6, className, style, color = [] }, ref) => {\n  const { width, height, domRef } = useAutoResize(ref)\n\n  function calcSVGData() {\n    return reverse\n      ? { w: 1, h: height, x: width / 2, y: 0 }\n      : { w: width, h: 1, x: 0, y: height / 2 }\n  }\n\n  const mergedColor = useMemo(() => deepMerge(deepClone(defaultColor, true), color || []), [color])\n\n  const { x, y, w, h } = useMemo(calcSVGData, [reverse, width, height])\n\n  const classNames = useMemo(() => classnames('dv-decoration-2', className), [\n    className\n  ])\n\n  return (\n    <div className={classNames} style={style} ref={domRef}>\n      <svg width={`${width}px`} height={`${height}px`}>\n        <rect x={x} y={y} width={w} height={h} fill={mergedColor[0]}>\n          <animate\n            attributeName={reverse ? 'height' : 'width'}\n            from='0'\n            to={reverse ? height : width}\n            dur={`${dur}s`}\n            calcMode='spline'\n            keyTimes='0;1'\n            keySplines='.42,0,.58,1'\n            repeatCount='indefinite'\n          />\n        </rect>\n\n        <rect x={x} y={y} width='1' height='1' fill={mergedColor[1]}>\n          <animate\n            attributeName={reverse ? 'y' : 'x'}\n            from='0'\n            to={reverse ? height : width}\n            dur={`${dur}s`}\n            calcMode='spline'\n            keyTimes='0;1'\n            keySplines='0.42,0,0.58,1'\n            repeatCount='indefinite'\n          />\n        </rect>\n      </svg>\n    </div>\n  )\n})\n\nDecoration.propTypes = {\n  dur: PropTypes.number,\n  reverse: PropTypes.bool,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  color: PropTypes.array\n}\n\n// 指定 props 的默认值：\nDecoration.defaultProps = {\n  reverse: false,\n  dur: 6\n}\n\nexport default Decoration\n"],"names":["defaultColor","Decoration","forwardRef","ref","reverse","dur","className","style","color","useAutoResize","width","height","domRef","calcSVGData","w","h","x","y","mergedColor","useMemo","deepMerge","deepClone","classNames","classnames","propTypes","PropTypes","number","bool","string","object","array","defaultProps"],"mappings":"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"}