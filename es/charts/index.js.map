{"version":3,"file":"index.js","sources":["../../src/components/charts/index.js"],"sourcesContent":["import React, { useRef, useEffect, useMemo, forwardRef } from 'react'\n\nimport PropTypes from 'prop-types'\n\nimport classnames from 'classnames'\n\nimport Chart from '@jiaminghi/charts'\n\nimport useAutoResize from '../../use/autoResize'\n\nimport './style.less'\n\nconst Charts = forwardRef(({ option = {}, className, style }, ref) => {\n  const { width, height, domRef } = useAutoResize(ref)\n\n  const chartRef = useRef(null)\n\n  const chartInstanceofRef = useRef(null)\n\n  useEffect(() => {\n    chartInstanceofRef.current ||\n      (chartInstanceofRef.current = new Chart(chartRef.current))\n\n    chartInstanceofRef.current.setOption(option || {}, true)\n  }, [option])\n\n  useEffect(() => {\n    chartInstanceofRef.current.resize()\n  }, [width, height])\n\n  const classNames = useMemo(\n    () => classnames('dv-charts-container', className),\n    [className]\n  )\n\n  return (\n    <div className={classNames} style={style} ref={domRef}>\n      <div className='charts-canvas-container' ref={chartRef} />\n    </div>\n  )\n})\n\nCharts.propTypes = {\n  option: PropTypes.object,\n  className: PropTypes.string,\n  style: PropTypes.object\n}\n\nexport default Charts\n"],"names":["Charts","forwardRef","ref","option","className","style","useAutoResize","width","height","domRef","chartRef","useRef","chartInstanceofRef","useEffect","current","Chart","setOption","resize","classNames","useMemo","classnames","propTypes","PropTypes","object","string"],"mappings":";;;;;;;;;;;;;;;AAYA,IAAMA,SAASC,WAAW,gBAAoCC,GAApC,EAA4C;AAAA,yBAAzCC,MAAyC;AAAA,MAAzCA,MAAyC,+BAAhC,EAAgC;AAAA,MAA5BC,SAA4B,QAA5BA,SAA4B;AAAA,MAAjBC,KAAiB,QAAjBA,KAAiB;;AAAA,uBAClCC,cAAcJ,GAAd,CADkC;AAAA,MAC5DK,KAD4D,kBAC5DA,KAD4D;AAAA,MACrDC,MADqD,kBACrDA,MADqD;AAAA,MAC7CC,MAD6C,kBAC7CA,MAD6C;;AAGpE,MAAMC,WAAWC,OAAO,IAAP,CAAjB;;AAEA,MAAMC,qBAAqBD,OAAO,IAAP,CAA3B;;AAEAE,YAAU,YAAM;AACdD,uBAAmBE,OAAnB,KACGF,mBAAmBE,OAAnB,GAA6B,IAAIC,QAAJ,CAAUL,SAASI,OAAnB,CADhC;;AAGAF,uBAAmBE,OAAnB,CAA2BE,SAA3B,CAAqCb,UAAU,EAA/C,EAAmD,IAAnD;AACD,GALD,EAKG,CAACA,MAAD,CALH;;AAOAU,YAAU,YAAM;AACdD,uBAAmBE,OAAnB,CAA2BG,MAA3B;AACD,GAFD,EAEG,CAACV,KAAD,EAAQC,MAAR,CAFH;;AAIA,MAAMU,aAAaC,QACjB;AAAA,WAAMC,WAAW,qBAAX,EAAkChB,SAAlC,CAAN;AAAA,GADiB,EAEjB,CAACA,SAAD,CAFiB,CAAnB;;AAKA,SACE;AAAA;AAAA,MAAK,WAAWc,UAAhB,EAA4B,OAAOb,KAAnC,EAA0C,KAAKI,MAA/C;AACE,iCAAK,WAAU,yBAAf,EAAyC,KAAKC,QAA9C;AADF,GADF;AAKD,CA5Bc,CAAf;;AA8BAV,OAAOqB,SAAP,GAAmB;AACjBlB,UAAQmB,UAAUC,MADD;AAEjBnB,aAAWkB,UAAUE,MAFJ;AAGjBnB,SAAOiB,UAAUC;AAHA,CAAnB;;;;"}